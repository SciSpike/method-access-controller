/* global describe, it */
'use strict';

const chai = require('chai');

chai.use(require('dirty-chai'));
const expect = chai.expect;

const uuid = require('uuid/v4');

const MethodAccessController = require('../../main/MethodAccessController');

describe('unit tests of StaticRbacRepository', () => {
  it('should permit Admin', () => {
    const controller = new MethodAccessController();
    const rcm = {
      role: ['Admin'],
      clazz: 'Foo',
      method: 'bar'
    };
    expect(controller.denies(rcm)).to.be.false();
    expect(controller.permits(rcm)).to.be.true();
    expect(controller.grants(rcm)).to.be.true();
  });
  it('should deny unknown role', () => {
    const policy = [{
      roles: /^Manager$/,
      classes: /^.*$/,
      methods: /^.*$/,
      strategy: true
    }];
    const controller = new MethodAccessController(policy);
    const rcm = {
      role: [uuid()],
      clazz: 'Foo',
      method: 'bar'
    };
    expect(controller.denies(rcm)).to.be.false();
    expect(controller.permits(rcm)).to.be.false();
    expect(controller.grants(rcm)).to.be.false();
  });
  it('should deny', () => {
    const clazz = 'Foo';
    const method = 'bar';
    const role = 'Cowboy';
    const controller = new MethodAccessController([{
      classes: new RegExp(`^${clazz}$`),
      methods: new RegExp(`^${method}$`),
      roles: new RegExp(`^${role}$`),
      strategy: false
    }]);
    const rcm = {
      role: [role],
      clazz,
      method
    };
    expect(controller.denies(rcm)).to.be.true();
    expect(controller.permits(rcm)).to.be.false();
    expect(controller.grants(rcm)).to.be.false();
  });
  it('should deny with a single denial', () => {
    const clazz = 'Foo';
    const method = 'bar';
    const role = 'Cowboy';
    const controller = new MethodAccessController([{
      classes: new RegExp(`^${clazz}$`),
      methods: new RegExp(`^${method}$`),
      roles: new RegExp(`^${role}$`),
      strategy: true
    }, {
      classes: new RegExp(`^${clazz}$`),
      methods: new RegExp(`^${method}$`),
      roles: new RegExp(`^${role}$`),
      strategy: true
    }, {
      classes: new RegExp(`^${clazz}$`),
      methods: new RegExp(`^${method}$`),
      roles: new RegExp(`^${role}$`),
      strategy: false
    }]);
    const rcm = {
      role: [role],
      clazz,
      method
    };
    expect(controller.denies(rcm)).to.be.true();
    expect(controller.permits(rcm)).to.be.false();
    expect(controller.grants(rcm)).to.be.false();
  });
  it('should work with custom strategy', () => {
    const clazz = 'Account';
    const method = 'close';
    const manager = 'Manager';
    const owner = 'Owner';

    const strategy = it => (it === null || it === void 0 ? void 0 : it.role) === manager || (it === null || it === void 0 ? void 0 : it.role) === owner;

    const controller = new MethodAccessController([{
      classes: new RegExp(`^${clazz}$`),
      methods: new RegExp(`^${method}$`),
      roles: new RegExp('^.*$'),
      strategy
    }]);
    const rcm = {
      role: [manager, owner],
      clazz,
      method
    };
    expect(controller.denies(rcm)).to.be.false();
    expect(controller.permits(rcm)).to.be.true();
    expect(controller.grants(rcm)).to.be.true();
    expect(controller.denies({
      role: 'TELLER',
      clazz,
      method
    })).to.be.false();
    expect(controller.permits({
      role: 'TELLER',
      clazz,
      method
    })).to.be.false();
    expect(controller.grants({
      role: 'TELLER',
      clazz,
      method
    })).to.be.false();
  });
  it('should work with crazy custom strategy', () => {
    const clazz = 'Account';
    const method = 'close';
    const manager = 'MANAGER'; // Managers can only close accounts on even calendar days

    const strategy = it => {
      var _it$data;

      return (it === null || it === void 0 ? void 0 : it.role) === manager && (it === null || it === void 0 ? void 0 : (_it$data = it.data) === null || _it$data === void 0 ? void 0 : _it$data.dayOfMonth) % 2 === 0;
    };

    const controller = new MethodAccessController([{
      classes: new RegExp(`^${clazz}$`),
      methods: new RegExp(`^${method}$`),
      roles: new RegExp('^.*$'),
      strategy
    }]);
    let dayOfMonth = 1;
    expect(controller.denies({
      role: manager,
      clazz,
      method,
      data: {
        dayOfMonth
      }
    })).to.be.false();
    expect(controller.permits({
      role: manager,
      clazz,
      method,
      data: {
        dayOfMonth
      }
    })).to.be.false();
    expect(controller.grants({
      role: manager,
      clazz,
      method,
      data: {
        dayOfMonth
      }
    })).to.be.false();
    expect(controller.denies({
      role: 'TELLER',
      clazz,
      method,
      data: {
        dayOfMonth
      }
    })).to.be.false();
    expect(controller.permits({
      role: 'TELLER',
      clazz,
      method,
      data: {
        dayOfMonth
      }
    })).to.be.false();
    expect(controller.grants({
      role: 'TELLER',
      clazz,
      method,
      data: {
        dayOfMonth
      }
    })).to.be.false();
    dayOfMonth = 2;
    expect(controller.denies({
      role: manager,
      clazz,
      method,
      data: {
        dayOfMonth
      }
    })).to.be.false();
    expect(controller.permits({
      role: manager,
      clazz,
      method,
      data: {
        dayOfMonth
      }
    })).to.be.true();
    expect(controller.grants({
      role: manager,
      clazz,
      method,
      data: {
        dayOfMonth
      }
    })).to.be.true();
    expect(controller.denies({
      role: 'TELLER',
      clazz,
      method,
      data: {
        dayOfMonth
      }
    })).to.be.false();
    expect(controller.permits({
      role: 'TELLER',
      clazz,
      method,
      data: {
        dayOfMonth
      }
    })).to.be.false();
    expect(controller.grants({
      role: 'TELLER',
      clazz,
      method,
      data: {
        dayOfMonth
      }
    })).to.be.false();
  });
  it('should grant when one role of many is granted', () => {
    const policy = [{
      roles: /^Manager$/,
      classes: /^.*$/,
      methods: /^.*$/,
      strategy: true
    }, {
      roles: /^Teller$/,
      classes: /^Foo$/,
      methods: /^snafu$/,
      strategy: true
    }];
    const controller = new MethodAccessController(policy);
    const rcm = {
      role: ['Teller', 'Manager'],
      clazz: 'Foo',
      method: 'bar'
    };
    expect(controller.denies(rcm)).to.be.false();
    expect(controller.permits(rcm)).to.be.true();
    expect(controller.grants(rcm)).to.be.true();
  });
  it('should throw when custom strategy is not a boolean, string or function', () => {
    const policy = [{
      roles: /^Teller$/,
      classes: /^Foo$/,
      methods: /^snafu$/,
      strategy: {} // not a boolean, string, or function

    }];
    const controller = new MethodAccessController(policy);
    const rcm = {
      role: 'Teller',
      clazz: 'Foo',
      method: 'snafu'
    };
    expect(() => controller.permits(rcm)).to.throw('E_STRATEGY_NOT_A_FUNCTION');
  });
  it('should deny when a role among many is denied', () => {
    const policy = [{
      roles: /^Dummy$/,
      classes: /^.*$/,
      methods: /^.*$/,
      strategy: false
    }, {
      roles: /^Teller$/,
      classes: /^Foo$/,
      methods: /^bar$/,
      strategy: true
    }];
    const controller = new MethodAccessController(policy);
    const rcm = {
      role: ['Teller', 'Dummy'],
      clazz: 'Foo',
      method: 'bar'
    };
    expect(controller.denies(rcm)).to.be.true();
    expect(controller.permits(rcm)).to.be.false();
    expect(controller.grants(rcm)).to.be.false();
  });
  it('should work with a custom strategy', function () {
    const strategy = it => {
      var _it$data2;

      return it.role === 'MANAGER' || ((_it$data2 = it.data) === null || _it$data2 === void 0 ? void 0 : _it$data2.balance) < 10000;
    }; // the above strategy assumes data is the Account instance


    const context = {};

    class Account {
      constructor(id, balance
      /* ... */
      ) {
        this.id = id;
        this.balance = balance; // ...

        this.controller = new MethodAccessController([{
          classes: /^Account$/,
          methods: /^close$/,
          roles: /^.+$/,
          strategy
        }]);
      } // ...


      close() {
        var _context$user;

        // begin security check
        const roles = (_context$user = context.user) === null || _context$user === void 0 ? void 0 : _context$user.roles;

        if (roles && !roles.map(role => this.controller.grants({
          role,
          clazz: 'Account',
          method: 'close',
          data: this // this allows the strategy to check the account's balance

        })).includes(true)) {
          var _context$user2;

          const e = new Error('E_ACCESS_DENIED');
          e.context = {
            user: context.user,
            roles: (_context$user2 = context.user) === null || _context$user2 === void 0 ? void 0 : _context$user2.roles,
            clazz: 'Account',
            method: 'close'
          };
          throw e;
        } // end security check


        this.open = false; // or whatever
      }

    }

    context.user = {
      roles: ['TELLER']
    };
    const hi = new Account(uuid(), 20000);
    const lo = new Account(uuid(), 1);
    expect(() => hi.close()).to.throw();
    lo.close();
    context.user.roles = ['MANAGER'];
    hi.close();
    lo.close();
    context.user.roles = ['TELLER', 'MANAGER'];
    hi.close();
    lo.close();
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy90ZXN0L3VuaXQvTWV0aG9kQWNjZXNzQ29udHJvbGxlci5zcGVjLmpzIl0sIm5hbWVzIjpbImNoYWkiLCJyZXF1aXJlIiwidXNlIiwiZXhwZWN0IiwidXVpZCIsIk1ldGhvZEFjY2Vzc0NvbnRyb2xsZXIiLCJkZXNjcmliZSIsIml0IiwiY29udHJvbGxlciIsInJjbSIsInJvbGUiLCJjbGF6eiIsIm1ldGhvZCIsImRlbmllcyIsInRvIiwiYmUiLCJmYWxzZSIsInBlcm1pdHMiLCJ0cnVlIiwiZ3JhbnRzIiwicG9saWN5Iiwicm9sZXMiLCJjbGFzc2VzIiwibWV0aG9kcyIsInN0cmF0ZWd5IiwiUmVnRXhwIiwibWFuYWdlciIsIm93bmVyIiwiZGF0YSIsImRheU9mTW9udGgiLCJ0aHJvdyIsImJhbGFuY2UiLCJjb250ZXh0IiwiQWNjb3VudCIsImNvbnN0cnVjdG9yIiwiaWQiLCJjbG9zZSIsInVzZXIiLCJtYXAiLCJpbmNsdWRlcyIsImUiLCJFcnJvciIsIm9wZW4iLCJoaSIsImxvIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBOztBQUVBLE1BQU1BLElBQUksR0FBR0MsT0FBTyxDQUFDLE1BQUQsQ0FBcEI7O0FBQ0FELElBQUksQ0FBQ0UsR0FBTCxDQUFTRCxPQUFPLENBQUMsWUFBRCxDQUFoQjtBQUNBLE1BQU1FLE1BQU0sR0FBR0gsSUFBSSxDQUFDRyxNQUFwQjs7QUFDQSxNQUFNQyxJQUFJLEdBQUdILE9BQU8sQ0FBQyxTQUFELENBQXBCOztBQUVBLE1BQU1JLHNCQUFzQixHQUFHSixPQUFPLENBQUMsbUNBQUQsQ0FBdEM7O0FBRUFLLFFBQVEsQ0FBQyxvQ0FBRCxFQUF1QyxNQUFNO0FBQ25EQyxFQUFBQSxFQUFFLENBQUMscUJBQUQsRUFBd0IsTUFBTTtBQUM5QixVQUFNQyxVQUFVLEdBQUcsSUFBSUgsc0JBQUosRUFBbkI7QUFDQSxVQUFNSSxHQUFHLEdBQUc7QUFBRUMsTUFBQUEsSUFBSSxFQUFFLENBQUMsT0FBRCxDQUFSO0FB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LEVBQVcsU0FBWCxDQUFyQjtBQUNBc0IsSUFBQUEsRUFBRSxDQUFDUCxLQUFIO0FBQ0FRLElBQUFBLEVBQUUsQ0FBQ1IsS0FBSDtBQUNELEdBdERDLENBQUY7QUF1REQsQ0FyUE8sQ0FBUiIsInNvdXJjZXNDb250ZW50IjpbIi8qIGdsb2JhbCBkZXNjcmliZSwgaXQgKi9cbid1c2Ugc3RyaWN0J1xuXG5jb25zdCBjaGFpID0gcmVxdWlyZSgnY2hhaScpXG5jaGFpLnVzZShyZXF1aXJlKCdkaXJ0eS1jaGFpJykpXG5jb25zdCBleHBlY3QgPSBjaGFpLmV4cGVjdFxuY29uc3QgdXVpZCA9IHJlcXVpcmUoJ3V1aWQvdjQnKVxuXG5jb25zdCBNZXRob2RBY2Nlc3NDb250cm9sbGVyID0gcmVxdWlyZSgnLi4vLi4vbWFpbi9NZXRob2RBY2Nlc3NDb250cm9sbGVyJylcblxuZGVzY3JpYmUoJ3VuaXQgdGVzdHMgb2YgU3RhdGljUmJhY1JlcG9zaXRvcnknLCAoKSA9PiB7XG4gIGl0KCdzaG91bGQgcGVybWl0IEFkbWluJywgKCkgPT4ge1xuICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgTWV0aG9kQWNjZXNzQ29udHJvbGxlcigpXG4gICAgY29uc3QgcmNtID0geyByb2xlOiBbJ0FkbWluJ10sIGNsYXp6OiAnRm9vJywgbWV0aG9kOiAnYmFyJyB9XG5cbiAgICBleHBlY3QoY29udHJvbGxlci5kZW5pZXMocmNtKSkudG8uYmUuZmFsc2UoKVxuICAgIGV4cGVjdChjb250cm9sbGVyLnBlcm1pdHMocmNtKSkudG8uYmUudHJ1ZSgpXG4gICAgZXhwZWN0KGNvbnRyb2xsZXIuZ3JhbnRzKHJjbSkpLnRvLmJlLnRydWUoKVxuICB9KVxuXG4gIGl0KCdzaG91bGQgZGVueSB1bmtub3duIHJvbGUnLCAoKSA9PiB7XG4gICAgY29uc3QgcG9saWN5ID0gW3tcbiAgICAgIHJvbGVzOiAvXk1hbmFnZXIkLyxcbiAgICAgIGNsYXNzZXM6IC9eLiokLyxcbiAgICAgIG1ldGhvZHM6IC9eLiokLyxcbiAgICAgIHN0cmF0ZWd5OiB0cnVlXG4gICAgfV1cbiAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IE1ldGhvZEFjY2Vzc0NvbnRyb2xsZXIocG9saWN5KVxuICAgIGNvbnN0IHJjbSA9IHsgcm9sZTogW3V1aWQoKV0sIGNsYXp6OiAnRm9vJywgbWV0aG9kOiAnYmFyJyB9XG5cbiAgICBleHBlY3QoY29udHJvbGxlci5kZW5pZXMocmNtKSkudG8uYmUuZmFsc2UoKVxuICAgIGV4cGVjdChjb250cm9sbGVyLnBlcm1pdHMocmNtKSkudG8uYmUuZmFsc2UoKVxuICAgIGV4cGVjdChjb250cm9sbGVyLmdyYW50cyhyY20pKS50by5iZS5mYWxzZSgpXG4gIH0pXG5cbiAgaXQoJ3Nob3VsZCBkZW55JywgKCkgPT4ge1xuICAgIGNvbnN0IGNsYXp6ID0gJ0ZvbydcbiAgICBjb25zdCBtZXRob2QgPSAnYmFyJ1xuICAgIGNvbnN0IHJvbGUgPSAnQ293Ym95J1xuICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgTWV0aG9kQWNjZXNzQ29udHJvbGxlcihbe1xuICAgICAgY2xhc3NlczogbmV3IFJlZ0V4cChgXiR7Y2xhenp9JGApLFxuICAgICAgbWV0aG9kczogbmV3IFJlZ0V4cChgXiR7bWV0aG9kfSRgKSxcbiAgICAgIHJvbGVzOiBuZXcgUmVnRXhwKGBeJHtyb2xlfSRgKSxcbiAgICAgIHN0cmF0ZWd5OiBmYWxzZVxuICAgIH1dKVxuXG4gICAgY29uc3QgcmNtID0geyByb2xlOiBbcm9sZV0sIGNsYXp6LCBtZXRob2QgfVxuXG4gICAgZXhwZWN0KGNvbnRyb2xsZXIuZGVuaWVzKHJjbSkpLnRvLmJlLnRydWUoKVxuICAgIGV4cGVjdChjb250cm9sbGVyLnBlcm1pdHMocmNtKSkudG8uYmUuZmFsc2UoKVxuICAgIGV4cGVjdChjb250cm9sbGVyLmdyYW50cyhyY20pKS50by5iZS5mYWxzZSgpXG4gIH0pXG5cbiAgaXQoJ3Nob3VsZCBkZW55IHdpdGggYSBzaW5nbGUgZGVuaWFsJywgKCkgPT4ge1xuICAgIGNvbnN0IGNsYXp6ID0gJ0ZvbydcbiAgICBjb25zdCBtZXRob2QgPSAnYmFyJ1xuICAgIGNvbnN0IHJvbGUgPSAnQ293Ym95J1xuICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgTWV0aG9kQWNjZXNzQ29udHJvbGxlcihbe1xuICAgICAgY2xhc3NlczogbmV3IFJlZ0V4cChgXiR7Y2xhenp9JGApLFxuICAgICAgbWV0aG9kczogbmV3IFJlZ0V4cChgXiR7bWV0aG9kfSRgKSxcbiAgICAgIHJvbGVzOiBuZXcgUmVnRXhwKGBeJHtyb2xlfSRgKSxcbiAgICAgIHN0cmF0ZWd5OiB0cnVlXG4gICAgfSwge1xuICAgICAgY2xhc3NlczogbmV3IFJlZ0V4cChgXiR7Y2xhenp9JGApLFxuICAgICAgbWV0aG9kczogbmV3IFJlZ0V4cChgXiR7bWV0aG9kfSRgKSxcbiAgICAgIHJvbGVzOiBuZXcgUmVnRXhwKGBeJHtyb2xlfSRgKSxcbiAgICAgIHN0cmF0ZWd5OiB0cnVlXG4gICAgfSwge1xuICAgICAgY2xhc3NlczogbmV3IFJlZ0V4cChgXiR7Y2xhenp9JGApLFxuICAgICAgbWV0aG9kczogbmV3IFJlZ0V4cChgXiR7bWV0aG9kfSRgKSxcbiAgICAgIHJvbGVzOiBuZXcgUmVnRXhwKGBeJHtyb2xlfSRgKSxcbiAgICAgIHN0cmF0ZWd5OiBmYWxzZVxuICAgIH1dKVxuXG4gICAgY29uc3QgcmNtID0geyByb2xlOiBbcm9sZV0sIGNsYXp6LCBtZXRob2QgfVxuXG4gICAgZXhwZWN0KGNvbnRyb2xsZXIuZGVuaWVzKHJjbSkpLnRvLmJlLnRydWUoKVxuICAgIGV4cGVjdChjb250cm9sbGVyLnBlcm1pdHMocmNtKSkudG8uYmUuZmFsc2UoKVxuICAgIGV4cGVjdChjb250cm9sbGVyLmdyYW50cyhyY20pKS50by5iZS5mYWxzZSgpXG4gIH0pXG5cbiAgaXQoJ3Nob3VsZCB3b3JrIHdpdGggY3VzdG9tIHN0cmF0ZWd5JywgKCkgPT4ge1xuICAgIGNvbnN0IGNsYXp6ID0gJ0FjY291bnQnXG4gICAgY29uc3QgbWV0aG9kID0gJ2Nsb3NlJ1xuICAgIGNvbnN0IG1hbmFnZXIgPSAnTWFuYWdlcidcbiAgICBjb25zdCBvd25lciA9ICdPd25lcidcbiAgICBjb25zdCBzdHJhdGVneSA9IGl0ID0+IGl0Py5yb2xlID09PSBtYW5hZ2VyIHx8IGl0Py5yb2xlID09PSBvd25lclxuXG4gICAgY29uc3QgY29udHJvbGxlciA9IG5ldyBNZXRob2RBY2Nlc3NDb250cm9sbGVyKFt7XG4gICAgICBjbGFzc2VzOiBuZXcgUmVnRXhwKGBeJHtjbGF6en0kYCksXG4gICAgICBtZXRob2RzOiBuZXcgUmVnRXhwKGBeJHttZXRob2R9JGApLFxuICAgICAgcm9sZXM6IG5ldyBSZWdFeHAoJ14uKiQnKSxcbiAgICAgIHN0cmF0ZWd5XG4gICAgfV0pXG5cbiAgICBjb25zdCByY20gPSB7IHJvbGU6IFttYW5hZ2VyLCBvd25lcl0sIGNsYXp6LCBtZXRob2QgfVxuXG4gICAgZXhwZWN0KGNvbnRyb2xsZXIuZGVuaWVzKHJjbSkpLnRvLmJlLmZhbHNlKClcbiAgICBleHBlY3QoY29udHJvbGxlci5wZXJtaXRzKHJjbSkpLnRvLmJlLnRydWUoKVxuICAgIGV4cGVjdChjb250cm9sbGVyLmdyYW50cyhyY20pKS50by5iZS50cnVlKClcblxuICAgIGV4cGVjdChjb250cm9sbGVyLmRlbmllcyh7IHJvbGU6ICdURUxMRVInLCBjbGF6eiwgbWV0aG9kIH0pKS50by5iZS5mYWxzZSgpXG4gICAgZXhwZWN0KGNvbnRyb2xsZXIucGVybWl0cyh7IHJvbGU6ICdURUxMRVInLCBjbGF6eiwgbWV0aG9kIH0pKS50by5iZS5mYWxzZSgpXG4gICAgZXhwZWN0KGNvbnRyb2xsZXIuZ3JhbnRzKHsgcm9sZTogJ1RFTExFUicsIGNsYXp6LCBtZXRob2QgfSkpLnRvLmJlLmZhbHNlKClcbiAgfSlcblxuICBpdCgnc2hvdWxkIHdvcmsgd2l0aCBjcmF6eSBjdXN0b20gc3RyYXRlZ3knLCAoKSA9PiB7XG4gICAgY29uc3QgY2xhenogPSAnQWNjb3VudCdcbiAgICBjb25zdCBtZXRob2QgPSAnY2xvc2UnXG4gICAgY29uc3QgbWFuYWdlciA9ICdNQU5BR0VSJ1xuICAgIC8vIE1hbmFnZXJzIGNhbiBvbmx5IGNsb3NlIGFjY291bnRzIG9uIGV2ZW4gY2FsZW5kYXIgZGF5c1xuICAgIGNvbnN0IHN0cmF0ZWd5ID0gaXQgPT4gaXQ/LnJvbGUgPT09IG1hbmFnZXIgJiYgaXQ/LmRhdGE/LmRheU9mTW9udGggJSAyID09PSAwXG5cbiAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IE1ldGhvZEFjY2Vzc0NvbnRyb2xsZXIoW3tcbiAgICAgIGNsYXNzZXM6IG5ldyBSZWdFeHAoYF4ke2NsYXp6fSRgKSxcbiAgICAgIG1ldGhvZHM6IG5ldyBSZWdFeHAoYF4ke21ldGhvZH0kYCksXG4gICAgICByb2xlczogbmV3IFJlZ0V4cCgnXi4qJCcpLFxuICAgICAgc3RyYXRlZ3lcbiAgICB9XSlcblxuICAgIGxldCBkYXlPZk1vbnRoID0gMVxuICAgIGV4cGVjdChjb250cm9sbGVyLmRlbmllcyh7IHJvbGU6IG1hbmFnZXIsIGNsYXp6LCBtZXRob2QsIGRhdGE6IHsgZGF5T2ZNb250aCB9IH0pKS50by5iZS5mYWxzZSgpXG4gICAgZXhwZWN0KGNvbnRyb2xsZXIucGVybWl0cyh7IHJvbGU6IG1hbmFnZXIsIGNsYXp6LCBtZXRob2QsIGRhdGE6IHsgZGF5T2ZNb250aCB9IH0pKS50by5iZS5mYWxzZSgpXG4gICAgZXhwZWN0KGNvbnRyb2xsZXIuZ3JhbnRzKHsgcm9sZTogbWFuYWdlciwgY2xhenosIG1ldGhvZCwgZGF0YTogeyBkYXlPZk1vbnRoIH0gfSkpLnRvLmJlLmZhbHNlKClcblxuICAgIGV4cGVjdChjb250cm9sbGVyLmRlbmllcyh7IHJvbGU6ICdURUxMRVInLCBjbGF6eiwgbWV0aG9kLCBkYXRhOiB7IGRheU9mTW9udGggfSB9KSkudG8uYmUuZmFsc2UoKVxuICAgIGV4cGVjdChjb250cm9sbGVyLnBlcm1pdHMoeyByb2xlOiAnVEVMTEVSJywgY2xhenosIG1ldGhvZCwgZGF0YTogeyBkYXlPZk1vbnRoIH0gfSkpLnRvLmJlLmZhbHNlKClcbiAgICBleHBlY3QoY29udHJvbGxlci5ncmFudHMoeyByb2xlOiAnVEVMTEVSJywgY2xhenosIG1ldGhvZCwgZGF0YTogeyBkYXlPZk1vbnRoIH0gfSkpLnRvLmJlLmZhbHNlKClcblxuICAgIGRheU9mTW9udGggPSAyXG4gICAgZXhwZWN0KGNvbnRyb2xsZXIuZGVuaWVzKHsgcm9sZTogbWFuYWdlciwgY2xhenosIG1ldGhvZCwgZGF0YTogeyBkYXlPZk1vbnRoIH0gfSkpLnRvLmJlLmZhbHNlKClcbiAgICBleHBlY3QoY29udHJvbGxlci5wZXJtaXRzKHsgcm9sZTogbWFuYWdlciwgY2xhenosIG1ldGhvZCwgZGF0YTogeyBkYXlPZk1vbnRoIH0gfSkpLnRvLmJlLnRydWUoKVxuICAgIGV4cGVjdChjb250cm9sbGVyLmdyYW50cyh7IHJvbGU6IG1hbmFnZXIsIGNsYXp6LCBtZXRob2QsIGRhdGE6IHsgZGF5T2ZNb250aCB9IH0pKS50by5iZS50cnVlKClcblxuICAgIGV4cGVjdChjb250cm9sbGVyLmRlbmllcyh7IHJvbGU6ICdURUxMRVInLCBjbGF6eiwgbWV0aG9kLCBkYXRhOiB7IGRheU9mTW9udGggfSB9KSkudG8uYmUuZmFsc2UoKVxuICAgIGV4cGVjdChjb250cm9sbGVyLnBlcm1pdHMoeyByb2xlOiAnVEVMTEVSJywgY2xhenosIG1ldGhvZCwgZGF0YTogeyBkYXlPZk1vbnRoIH0gfSkpLnRvLmJlLmZhbHNlKClcbiAgICBleHBlY3QoY29udHJvbGxlci5ncmFudHMoeyByb2xlOiAnVEVMTEVSJywgY2xhenosIG1ldGhvZCwgZGF0YTogeyBkYXlPZk1vbnRoIH0gfSkpLnRvLmJlLmZhbHNlKClcbiAgfSlcblxuICBpdCgnc2hvdWxkIGdyYW50IHdoZW4gb25lIHJvbGUgb2YgbWFueSBpcyBncmFudGVkJywgKCkgPT4ge1xuICAgIGNvbnN0IHBvbGljeSA9IFtcbiAgICAgIHtcbiAgICAgICAgcm9sZXM6IC9eTWFuYWdlciQvLFxuICAgICAgICBjbGFzc2VzOiAvXi4qJC8sXG4gICAgICAgIG1ldGhvZHM6IC9eLiokLyxcbiAgICAgICAgc3RyYXRlZ3k6IHRydWVcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHJvbGVzOiAvXlRlbGxlciQvLFxuICAgICAgICBjbGFzc2VzOiAvXkZvbyQvLFxuICAgICAgICBtZXRob2RzOiAvXnNuYWZ1JC8sXG4gICAgICAgIHN0cmF0ZWd5OiB0cnVlXG4gICAgICB9XG4gICAgXVxuICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgTWV0aG9kQWNjZXNzQ29udHJvbGxlcihwb2xpY3kpXG4gICAgY29uc3QgcmNtID0geyByb2xlOiBbJ1RlbGxlcicsICdNYW5hZ2VyJ10sIGNsYXp6OiAnRm9vJywgbWV0aG9kOiAnYmFyJyB9XG5cbiAgICBleHBlY3QoY29udHJvbGxlci5kZW5pZXMocmNtKSkudG8uYmUuZmFsc2UoKVxuICAgIGV4cGVjdChjb250cm9sbGVyLnBlcm1pdHMocmNtKSkudG8uYmUudHJ1ZSgpXG4gICAgZXhwZWN0KGNvbnRyb2xsZXIuZ3JhbnRzKHJjbSkpLnRvLmJlLnRydWUoKVxuICB9KVxuXG4gIGl0KCdzaG91bGQgdGhyb3cgd2hlbiBjdXN0b20gc3RyYXRlZ3kgaXMgbm90IGEgYm9vbGVhbiwgc3RyaW5nIG9yIGZ1bmN0aW9uJywgKCkgPT4ge1xuICAgIGNvbnN0IHBvbGljeSA9IFtcbiAgICAgIHtcbiAgICAgICAgcm9sZXM6IC9eVGVsbGVyJC8sXG4gICAgICAgIGNsYXNzZXM6IC9eRm9vJC8sXG4gICAgICAgIG1ldGhvZHM6IC9ec25hZnUkLyxcbiAgICAgICAgc3RyYXRlZ3k6IHt9IC8vIG5vdCBhIGJvb2xlYW4sIHN0cmluZywgb3IgZnVuY3Rpb25cbiAgICAgIH1cbiAgICBdXG4gICAgY29uc3QgY29udHJvbGxlciA9IG5ldyBNZXRob2RBY2Nlc3NDb250cm9sbGVyKHBvbGljeSlcbiAgICBjb25zdCByY20gPSB7IHJvbGU6ICdUZWxsZXInLCBjbGF6ejogJ0ZvbycsIG1ldGhvZDogJ3NuYWZ1JyB9XG5cbiAgICBleHBlY3QoKCkgPT4gY29udHJvbGxlci5wZXJtaXRzKHJjbSkpLnRvLnRocm93KCdFX1NUUkFURUdZX05PVF9BX0ZVTkNUSU9OJylcbiAgfSlcblxuICBpdCgnc2hvdWxkIGRlbnkgd2hlbiBhIHJvbGUgYW1vbmcgbWFueSBpcyBkZW5pZWQnLCAoKSA9PiB7XG4gICAgY29uc3QgcG9saWN5ID0gW1xuICAgICAge1xuICAgICAgICByb2xlczogL15EdW1teSQvLFxuICAgICAgICBjbGFzc2VzOiAvXi4qJC8sXG4gICAgICAgIG1ldGhvZHM6IC9eLiokLyxcbiAgICAgICAgc3RyYXRlZ3k6IGZhbHNlXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICByb2xlczogL15UZWxsZXIkLyxcbiAgICAgICAgY2xhc3NlczogL15Gb28kLyxcbiAgICAgICAgbWV0aG9kczogL15iYXIkLyxcbiAgICAgICAgc3RyYXRlZ3k6IHRydWVcbiAgICAgIH1cbiAgICBdXG4gICAgY29uc3QgY29udHJvbGxlciA9IG5ldyBNZXRob2RBY2Nlc3NDb250cm9sbGVyKHBvbGljeSlcbiAgICBjb25zdCByY20gPSB7IHJvbGU6IFsnVGVsbGVyJywgJ0R1bW15J10sIGNsYXp6OiAnRm9vJywgbWV0aG9kOiAnYmFyJyB9XG5cbiAgICBleHBlY3QoY29udHJvbGxlci5kZW5pZXMocmNtKSkudG8uYmUudHJ1ZSgpXG4gICAgZXhwZWN0KGNvbnRyb2xsZXIucGVybWl0cyhyY20pKS50by5iZS5mYWxzZSgpXG4gICAgZXhwZWN0KGNvbnRyb2xsZXIuZ3JhbnRzKHJjbSkpLnRvLmJlLmZhbHNlKClcbiAgfSlcblxuICBpdCgnc2hvdWxkIHdvcmsgd2l0aCBhIGN1c3RvbSBzdHJhdGVneScsIGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBzdHJhdGVneSA9IGl0ID0+IGl0LnJvbGUgPT09ICdNQU5BR0VSJyB8fCBpdC5kYXRhPy5iYWxhbmNlIDwgMTAwMDBcbiAgICAvLyB0aGUgYWJvdmUgc3RyYXRlZ3kgYXNzdW1lcyBkYXRhIGlzIHRoZSBBY2NvdW50IGluc3RhbmNlXG4gICAgY29uc3QgY29udGV4dCA9IHt9XG5cbiAgICBjbGFzcyBBY2NvdW50IHtcbiAgICAgIGNvbnN0cnVjdG9yIChpZCwgYmFsYW5jZSAvKiAuLi4gKi8pIHtcbiAgICAgICAgdGhpcy5pZCA9IGlkXG4gICAgICAgIHRoaXMuYmFsYW5jZSA9IGJhbGFuY2VcbiAgICAgICAgLy8gLi4uXG4gICAgICAgIHRoaXMuY29udHJvbGxlciA9IG5ldyBNZXRob2RBY2Nlc3NDb250cm9sbGVyKFt7XG4gICAgICAgICAgY2xhc3NlczogL15BY2NvdW50JC8sXG4gICAgICAgICAgbWV0aG9kczogL15jbG9zZSQvLFxuICAgICAgICAgIHJvbGVzOiAvXi4rJC8sXG4gICAgICAgICAgc3RyYXRlZ3lcbiAgICAgICAgfV0pXG4gICAgICB9XG5cbiAgICAgIC8vIC4uLlxuXG4gICAgICBjbG9zZSAoKSB7XG4gICAgICAgIC8vIGJlZ2luIHNlY3VyaXR5IGNoZWNrXG4gICAgICAgIGNvbnN0IHJvbGVzID0gY29udGV4dC51c2VyPy5yb2xlc1xuXG4gICAgICAgIGlmIChyb2xlcyAmJiAhcm9sZXMubWFwKHJvbGUgPT4gdGhpcy5jb250cm9sbGVyLmdyYW50cyh7XG4gICAgICAgICAgcm9sZSxcbiAgICAgICAgICBjbGF6ejogJ0FjY291bnQnLFxuICAgICAgICAgIG1ldGhvZDogJ2Nsb3NlJyxcbiAgICAgICAgICBkYXRhOiB0aGlzIC8vIHRoaXMgYWxsb3dzIHRoZSBzdHJhdGVneSB0byBjaGVjayB0aGUgYWNjb3VudCdzIGJhbGFuY2VcbiAgICAgICAgfSkpLmluY2x1ZGVzKHRydWUpKSB7XG4gICAgICAgICAgY29uc3QgZSA9IG5ldyBFcnJvcignRV9BQ0NFU1NfREVOSUVEJylcbiAgICAgICAgICBlLmNvbnRleHQgPSB7IHVzZXI6IGNvbnRleHQudXNlciwgcm9sZXM6IGNvbnRleHQudXNlcj8ucm9sZXMsIGNsYXp6OiAnQWNjb3VudCcsIG1ldGhvZDogJ2Nsb3NlJyB9XG4gICAgICAgICAgdGhyb3cgZVxuICAgICAgICB9XG4gICAgICAgIC8vIGVuZCBzZWN1cml0eSBjaGVja1xuXG4gICAgICAgIHRoaXMub3BlbiA9IGZhbHNlIC8vIG9yIHdoYXRldmVyXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29udGV4dC51c2VyID0geyByb2xlczogWydURUxMRVInXSB9XG4gICAgY29uc3QgaGkgPSBuZXcgQWNjb3VudCh1dWlkKCksIDIwMDAwKVxuICAgIGNvbnN0IGxvID0gbmV3IEFjY291bnQodXVpZCgpLCAxKVxuXG4gICAgZXhwZWN0KCgpID0+IGhpLmNsb3NlKCkpLnRvLnRocm93KClcbiAgICBsby5jbG9zZSgpXG5cbiAgICBjb250ZXh0LnVzZXIucm9sZXMgPSBbJ01BTkFHRVInXVxuICAgIGhpLmNsb3NlKClcbiAgICBsby5jbG9zZSgpXG5cbiAgICBjb250ZXh0LnVzZXIucm9sZXMgPSBbJ1RFTExFUicsICdNQU5BR0VSJ11cbiAgICBoaS5jbG9zZSgpXG4gICAgbG8uY2xvc2UoKVxuICB9KVxufSlcbiJdfQ==